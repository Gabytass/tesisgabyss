<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Carrito de Compras</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-light">
  <div class="container mt-5">
    <h2 class="text-center mb-4">ðŸ›’ Carrito de Compras</h2>

    {% if carrito %}
      <table class="table table-bordered table-striped">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Producto</th>
            <th>Precio</th>
            <th>Imagen</th>
            <th>AcciÃ³n</th>
          </tr>
        </thead>
        <tbody>
          {% for item in carrito %}
          <tr>
            <td>{{ loop.index }}</td>
            <td>{{ item['nombre'] }}</td>
            <td>${{ '%.2f' | format(item.get('precio', 0)) }}</td>
            <td><img src="{{ item['imagen'] }}" alt="img" width="80" /></td>
            <td>
              <form action="{{ url_for('eliminar_del_carrito', indice=loop.index0) }}" method="POST">
                <button class="btn btn-sm btn-danger">Eliminar</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="text-end mb-4">
        <h4>Total: <span class="text-success">${{ '%.2f' | format(total) }}</span></h4>
      </div>

      <form action="{{ url_for('vaciar_carrito') }}" method="POST" class="mb-3 text-end">
        <button class="btn btn-warning">Vaciar Carrito</button>
      </form>

    {% else %}
      <p class="text-center fs-5 text-muted">No hay productos en el carrito.</p>
    {% endif %}

    <div class="text-center">
      <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">Volver al CatÃ¡logo</a>
    </div>
  </div>
</body>
</html>

